%-------------bowen-init---------------------------------
unix('cp ../cutoff.py ./') %cp cutoff.py to CalcFold  #copy constraint script to the calculation folder
unix('/ccc/cont003/home/unipoiti/frapperg/work/ovito/bin/ovitos cutoff.py') %run cutoff.py by using ovitos code
# call ovitos to execute cutoff.py
fid = fopen('distNum'); %distNum: number of bond related to C-C bond 
#create distNum file, which contains a logical number: true (good structure) or fales (bad structure)
tline = fgetl(fid); % get the feedback of the calculated number of the bonds # read this distNum file
if tline(1)=='F' # if distNum = False, print error information, give the enthalpy of this structure to 100000 (bad s)
POP_STRUC.POPULATION(Ind_No).Error = maxErrors + 1;
POP_STRUC.POPULATION(Ind_No).Enthalpies(end) = 100000
disp('The structure after relaxation cannot satisfy CUTOFF constraint, please see the Warning ...');
newPOP.numIons = numIons;
newPOP.LATTICE = LATTICE;
newPOP.COORDINATES = COORDINATES;
brokenPOSCARStr = createPOSCARStr(POP_STRUC.POPULATION(Ind_No), newPOP, ORG_STRUC.atomType);
USPEXmessage(0, brokenPOSCARStr, 1);
Error = 1;
end
end
%-------------bowen--end------------------------------------
